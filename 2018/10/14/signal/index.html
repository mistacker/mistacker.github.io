<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="四处漂泊，落叶归根。"><title>Flask中的信号 | Mistacker|博客</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Flask中的信号</h1><a id="logo" href="/.">Mistacker|博客</a><p class="description">孤帆远影碧空尽，唯见长江天际流。</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/comments/"><i class="fa fa-comments"> 留言</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Flask中的信号</h1><div class="post-meta">Oct 14, 2018<span> | </span><span class="category"><a href="/categories/python/">python</a><a href="/categories/python/flask/">flask</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> 阅读</span></span></div><div class="post-content"><p><strong>0.6新版功能</strong></p>
<p>从<code>Flask 0.6</code>开始，<code>Flask</code>继承了信号支持。这个支持由<code>blinker</code>库提供的，并且当它不可用时会优雅地退回。</p>
<p>什么是信号？信号通过发送发生在和新框架的其他地方或<code>Flask</code>扩展的动作时通知来帮助你解耦应用。简而言之，信号允许特定的发送端通知订阅者发生了什么。</p>
<p><code>Flask</code>提供了几个信号，其他的扩展可能会提供更多。另外，请注意信号倾向于通知订阅者，而不应该鼓励订阅者修改数据。你会注意到，信号似乎和一些内置的装饰器做同样的事情。然后它们工作的方式是有差异的。譬如核心的<code>before_request()</code>处理程序以特定的顺序执行，并且可以在返回响应之前放弃请求。相比之下，所有信号的处理器执行的顺序没有定义，并且不修改任何数据、</p>
<p>信号之于其他处理器最大的优势是你可以在一秒钟的不同的时段上安全订阅。譬如这些临时的订阅对单元测试很有用。比如你想要知道哪个模板被作为请求的一部分渲染：信号允许你完全地了解这些。</p>
<h2 id="订阅信号"><a href="#订阅信号" class="headerlink" title="订阅信号"></a>订阅信号</h2><p>你可以使用信号的<code>connect()</code>方法来订阅信号。该函数第一个参数是信号发出时要调用的函数，第二个参数是可选的，用于确定信号的发送端。退订一个信号，可以使用<code>disconnect()</code>方法。</p>
<p>对于所有的核心<code>Flask</code>信号，发送端都是发出信号的应用。当你订阅一个信号，情趣噩耗也提供一个发送端，除非你确实详见听全部应用的信号。这在你开发一个扩展的时候尤其正确。</p>
<p>比如这里有一个用于在单元测试中找出哪个模板被渲染和传入模板的变量的助手上下文管理器：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> template_rendered</span><br><span class="line"><span class="keyword">from</span> contextlib <span class="keyword">import</span> contextmanager</span><br><span class="line"></span><br><span class="line"><span class="meta">@contextmanager</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">captured_temolates</span><span class="params">(app)</span>:</span></span><br><span class="line">    recorded = []</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">record</span><span class="params">(sender, template, context, **extra)</span>:</span></span><br><span class="line">        recorded.append((template, context))</span><br><span class="line">    template_rendered.connect(record, app)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">yield</span> recorded</span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        template_rendered.disconnect(record, app)</span><br></pre></td></tr></table></figure></p>
<p>这可以很容易地与一个测试客户端配对：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> captured_templates(app) <span class="keyword">as</span> templates:</span><br><span class="line">    rv = app.test_client().get(<span class="string">'/'</span>)</span><br><span class="line">    <span class="keyword">assert</span> rv.status_code == <span class="number">200</span></span><br><span class="line">    <span class="keyword">assert</span> len(templates) == <span class="number">1</span></span><br><span class="line">    template, context = templates[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">assert</span> template.name == <span class="string">'index.html'</span></span><br><span class="line">    <span class="keyword">assert</span> len(context[<span class="string">'items'</span>]) == <span class="number">10</span></span><br></pre></td></tr></table></figure></p>
<p>确保订阅使用了一个额外的<code>**extra</code>参数，这样当<code>Flask</code>对象引入新参数时你的调用不会失败。</p>
<p>代码中，从<code>with</code>块的应用<code>app</code>中流出的渲染的所有模板现在会被记录到<code>templates</code>变量。无论何时模板被渲染，模板对象和上下文中都会被添加到它里面。</p>
<p>此外，也有一个方便的助手方法(<code>connected_to()</code>)，它允许你临时地把函数订阅到信号并使用信号自己的上下文管理器。因为这个上下文管理器的返回值不能有我们决定，所以必须吧列表作为参数传入：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> template_rendered</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">captured_templates</span><span class="params">(app, recorded, **extra)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">record</span><span class="params">(sender, template, context)</span>:</span></span><br><span class="line">        recorded.append((template, context))</span><br><span class="line">    <span class="keyword">return</span> template_rendered.connected_to(record, app)</span><br></pre></td></tr></table></figure></p>
<p>上面的例子会看起来是这样：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">templates = []</span><br><span class="line"><span class="keyword">with</span> captured_templates(app, ttemplates, **extra):</span><br><span class="line">    ...</span><br><span class="line">    template, context = templates[<span class="number">0</span>]</span><br></pre></td></tr></table></figure></p>
<p><em>注：<code>connected_to()</code>方法出现于<code>Blinker 1.1</code></em></p>
<h2 id="创建信号"><a href="#创建信号" class="headerlink" title="创建信号"></a>创建信号</h2><p>如果你想要在自己的应用中使用信号，你可以直接使用<code>blinker</code>库。最常见的用法是自定义的<code>Namespace</code>中命名信号。这也是大多数时候推荐的做法：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> blinker <span class="keyword">import</span> Namespace</span><br><span class="line">my_signals = Namespace()</span><br></pre></td></tr></table></figure></p>
<p>现在你可以这样创建新的信号：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">model_saved = my_signals.signal(<span class="string">"model-saved"</span>)</span><br></pre></td></tr></table></figure></p>
<p>这里使用唯一的信号名，简化调试。可以用<code>name</code>属性来访问信号名。</p>
<h4 id="给扩展开发者"><a href="#给扩展开发者" class="headerlink" title="给扩展开发者"></a>给扩展开发者</h4><p>如果你在编写一个<code>Flask</code>扩展并且你想优雅地在没有<code>blinker</code>安装时退化，你可以用<code>flask.signals.Namespace</code>这么做。</p>
<h2 id="发送信号"><a href="#发送信号" class="headerlink" title="发送信号"></a>发送信号</h2><p>如果你想要发出信号，调用<code>send()</code>方法可以做到。它接受发送端作为第一个参数，和一些推送到信号订阅者的可选关键字参数：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Model</span><span class="params">(object)</span>:</span></span><br><span class="line">    ...</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">save</span><span class="params">(self)</span>:</span></span><br><span class="line">        model_saved.send(self)</span><br></pre></td></tr></table></figure></p>
<p>永远尝试选择一个合适的发送端。如果你有一个发出信号的类，把<code>self</code>作为发送端。如果你从一个随机的函数发出信号，把<code>current_app._get_current_object()</code>作为发送端。<br>传递代理作为发送端</p>
<p>永远不要向信号传递<code>current_app</code>作为发送端，使用<code>current_app._get_current_object()</code>作为替代。这样的原因是，<code>current_app</code>是一个代理，而不是真正的应用对象。</p>
<h2 id="信号与Flask的请求上下文"><a href="#信号与Flask的请求上下文" class="headerlink" title="信号与Flask的请求上下文"></a>信号与Flask的请求上下文</h2><p>信号在接收时，完全支持请求上下文。上下文本地的变量在<code>request_started</code>和<code>request_finished</code>一贯可用，所以你可以新人<code>flask.g</code>和其他需要的东西。注意发送信号和<code>request_tearing_down</code>信号中描述的限制。</p>
<h2 id="基于装饰器的信号订阅"><a href="#基于装饰器的信号订阅" class="headerlink" title="基于装饰器的信号订阅"></a>基于装饰器的信号订阅</h2><p>你可以在<code>Blinker 1.1</code>中容易地用新的<code>connect_via()</code>装饰器订阅信号：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> template_rendered</span><br><span class="line"></span><br><span class="line"><span class="meta">@template_rendered.connect_via(app)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">when_template_rendered</span><span class="params">(sender, template, context, **extra)</span>:</span></span><br><span class="line">    print(<span class="string">"Template %s is rendered with %s"</span> % (template.name, context))</span><br></pre></td></tr></table></figure></p>
<h2 id="核心信号"><a href="#核心信号" class="headerlink" title="核心信号"></a>核心信号</h2><p>下列是<code>Flask</code>中存在的信号：</p>
<h4 id="flask-template-rendered"><a href="#flask-template-rendered" class="headerlink" title="flask.template_rendered"></a>flask.template_rendered</h4><p>当模板成功渲染的时候，这个信号就会发出。这个信号与模板实例<code>template</code>和上下文的字典(名为<code>context</code>)一起调用。</p>
<p>订阅示例：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">log_template_renders</span><span class="params">(sender, template, context, **extra)</span>:</span></span><br><span class="line">    sender.logger.debug(<span class="string">'Rendering template "%s" with context %s'</span>, template.name <span class="keyword">or</span> <span class="string">'string template'</span>, context)</span><br><span class="line">    </span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> template_rendered</span><br><span class="line"></span><br><span class="line">template_rendered.connect(log_template_renders, app)</span><br></pre></td></tr></table></figure></p>
<h4 id="flask-request-started"><a href="#flask-request-started" class="headerlink" title="flask.request_started"></a>flask.request_started</h4><p>这个信号在此处建立请求上下文之外的任何请求处理开始前发送。因为请求上下文已经被约束，订阅者可以用<code>request</code>之类的标准全局代理访问请求。</p>
<p>订阅示例：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">log_request</span><span class="params">(sender, **extra)</span>:</span></span><br><span class="line">    sender.logger.debug(<span class="string">'Request context is set up'</span>)</span><br><span class="line">    </span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> request_started</span><br><span class="line"></span><br><span class="line">request_started.connect(log_request, app)</span><br></pre></td></tr></table></figure></p>
<h4 id="flask-request-finished"><a href="#flask-request-finished" class="headerlink" title="flask.request_finished"></a>flask.request_finished</h4><p>这个信号恰好在请求发送给客户端之前发送。它传递名为<code>response</code>的响应。</p>
<p>订阅示例：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">log_response</span><span class="params">(sender, response, **extra)</span>:</span></span><br><span class="line">    sender.logger.debug(<span class="string">'Request context is about to close down. Response: %s'</span>, response)</span><br><span class="line">    </span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> request_finished</span><br><span class="line">request_finished.connect(log_response, app)</span><br></pre></td></tr></table></figure></p>
<h4 id="flask-got-request-exception"><a href="#flask-got-request-exception" class="headerlink" title="flask.got_request_exception"></a>flask.got_request_exception</h4><p>这个信号在请求处理中抛出异常时发送。它在标准一场处理生效之前，甚至是在没有异常处理的情况下发送。异常本身会通过<code>exception</code>传递订阅函数。</p>
<p>订阅示例：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">log_exception</span><span class="params">(sender, exception, **extra)</span>:</span></span><br><span class="line">    sender.logger.debug(<span class="string">'Got exception during processing: %s'</span>, exception)</span><br><span class="line">    </span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> got_request_exception</span><br><span class="line">got_request_exception.connect(log_exception, app)</span><br></pre></td></tr></table></figure></p>
<h4 id="flask-request-tearing-down"><a href="#flask-request-tearing-down" class="headerlink" title="flask.request_tearing_down"></a>flask.request_tearing_down</h4><p>这个信号在请求销毁时发送。他总是被调用，即使发生异常。当前监听这个信号的函数会在常规销毁处理后被调用，但这不是你可以依赖的。</p>
<p>订阅示例：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">close_db_connection</span><span class="params">(sender, **extra)</span>:</span></span><br><span class="line">    session.close()</span><br><span class="line">    </span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> request_tearing_down</span><br><span class="line">request_tearing_down.connect(close_db_connection, app)</span><br></pre></td></tr></table></figure></p>
<p>从<code>Flask 0.9</code>，如果有异常的话他会被传递一个<code>exc</code>关键字餐朱引用导致销毁的异常。</p>
<h4 id="flask-appcontext-tearing-down"><a href="#flask-appcontext-tearing-down" class="headerlink" title="flask.appcontext_tearing_down"></a>flask.appcontext_tearing_down</h4><p>这个消息在应用上下文销毁时发送。它总是被调用，即使发生异常。当前建英这个信号的函数会在常规销毁处理后被调用，但这不是你可以依赖的。</p>
<p>订阅示例：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">close_db_connection</span><span class="params">(sender, **extra)</span>:</span></span><br><span class="line">    session.close()</span><br><span class="line">    </span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> request_tearing_down</span><br><span class="line">appcontext_tearing_down.connect(close_db_connection, app)</span><br></pre></td></tr></table></figure></p>
<p>如果有一场他会被传递一个exc关键字参数引用导致销毁的异常。</p>
<h4 id="flask-appcontext-pushed"><a href="#flask-appcontext-pushed" class="headerlink" title="flask.appcontext_pushed"></a>flask.appcontext_pushed</h4><p>这个信号在应用上下文压入栈时发送。发送者是应用对象。这通常在单元测试中为了暂时地钩住信息比较有用。例如这个可以用来提前在g对象上设置一些资源。</p>
<p>用法示例：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> contextlib <span class="keyword">import</span> contextmanager</span><br><span class="line"><span class="keyword">from</span> flask impo</span><br><span class="line"></span><br><span class="line"><span class="meta">@contextmanager</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">user_set</span><span class="params">(app, user)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">handler</span><span class="params">(sender, **kwargs)</span>:</span></span><br><span class="line">        g.user = user</span><br><span class="line">    <span class="keyword">with</span> appcontext_pushed.connected_to(handler, app):</span><br><span class="line">        <span class="keyword">yield</span></span><br></pre></td></tr></table></figure></p>
<p>测试代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">def test_user_me(self):</span><br><span class="line">    with user_set(app, &apos;john&apos;):</span><br><span class="line">        c = app.test_client()</span><br><span class="line">        resp = c.get(&apos;/users/me&apos;)</span><br><span class="line">        assert resp.data == &apos;username=john&apos;</span><br></pre></td></tr></table></figure></p>
<p>0.10 新版功能</p>
<h4 id="flask-appcontext-popped"><a href="#flask-appcontext-popped" class="headerlink" title="flask.appcontext_popped"></a>flask.appcontext_popped</h4><p>这个信号在应用上下文弹出栈时发送。发送这是应用对象。这通常在<code>appcontext_tearing_down</code>信号发送后发送。</p>
<p>0.10 新版功能</p>
<h4 id="flask-message-flashed"><a href="#flask-message-flashed" class="headerlink" title="flask.message_flashed"></a>flask.message_flashed</h4><p>这个信号在应用对象闪现一个消息时发送。消息作为<code>message</code>命名参数发送，分别则是<code>categpry</code>参数。</p>
<p>订阅示例：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">recorded = []</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">record</span><span class="params">(sender, message, category, **extra)</span>:</span></span><br><span class="line">    recorded.append((message, category))</span><br><span class="line">    </span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> message_flashed</span><br><span class="line">message_flashed.connect(record, app)</span><br></pre></td></tr></table></figure></p>
<p>0.10 新版功能</p>
<p>文章借鉴<a href="https://docs.pythontab.com/flask/flask0.10/index.html" target="_blank" rel="noopener">Flask中文手册</a></p>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a class="article-share-link" data-url="https://mistacker.github.io/2018/10/14/signal/" data-id="cjnlub176001sz66idnjw4uvx" data-qrcode="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACIklEQVR42u3aQQ7CMAwFUe5/6XIBWubbASnOdIWgpH5dWInt1wtfF7ju7idr8n+1LhkyZGzLIME9B/28MlmBP/c2BhkyZBzAIEHc3Z+GS9Iuj02GDBkyeKDP6/AkLkOGDBlrGSmMBC1DhgwZnUMsr3TVEvefzuIyZMjYkFErnP3n80/6GzJkyNiKcYUXXyFtUvIk++FZMmTIGM3gCY4vR8D9hCtDhowzGfwAmRbOyIAFT8fBm5YhQ8YIRtENtnSdA3DcnJAhQ8ZoRr+W9bvku7iCKEOGjM0ZvDXIQ0mbmhxwG6EMGTKGMtIyWW3coZamSTqWIUPGCYxVmFXDXrye9uF7GTJkjGakIw4EXyuNke3mlzVlyJAxjpEeNTtNgk4LoThmIUOGjEGMTimfpGxyuE1LbzJkyDiHkW7jyK9p0LUXh9KuDBkyRjDSRfmD+VayNhUiQ4YMGWvreWSzmA6KxZ0NGTJkbMtIC2dpuzEdsOChy5Ah4zQGuSkdwqiNTfC0fls7lCFDxmhGuinspFeyQeRpWoYMGecw0sGvtPTPn1Usz8mQIWMo4wqvdKsXnJs7VBkyZIxmFFuG+MG1TR5J+sX2pwwZMrZl8NGKdDvIy3D8paCqoQwZMoYy0u0dSbK1FFxEypAhQ0Zj/KIfblB0kyFDhozGgZa8iDRBL0u4MmTI2IRBDrG1hgE5iKZtVBkyZJzG4Bu19PtOGY5jZMiQMZrxBhyB+gj7vlFrAAAAAElFTkSuQmCC">分享</a><div class="tags"><a href="/tags/信号/">信号</a><a href="/tags/blinker/">blinker</a></div><div class="post-nav"><a class="pre" href="/2018/10/15/osroom/">OSROOM安装使用</a><a class="next" href="/2018/10/13/email/">电子邮件</a></div><div id="lv-container" data-id="city" data-uid="MTAyMC8zOTk4Ny8xNjUxNA=="><script>(function(d, s) {
   var j, e = d.getElementsByTagName(s)[0];
   if (typeof LivereTower === 'function') { return; }
   j = d.createElement(s);
   j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
   j.async = true;
   e.parentNode.insertBefore(j, e);
})(document, 'script');
</script></div></div></div></div><div class="pure-u-1 pure-u-md-1-4"><div id="sidebar"><div class="widget"><input class="st-default-search-input" placeholder="Search" type="text"/></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/URL/">URL</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/python/flask/">flask</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/scrapy/">scrapy</a></li></ul></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/mongodb/" style="font-size: 15px;">mongodb</a> <a href="/tags/HTML遍历/" style="font-size: 15px;">HTML遍历</a> <a href="/tags/bs4/" style="font-size: 15px;">bs4</a> <a href="/tags/celery/" style="font-size: 15px;">celery</a> <a href="/tags/tkinter/" style="font-size: 15px;">tkinter</a> <a href="/tags/email/" style="font-size: 15px;">email</a> <a href="/tags/linkextractor/" style="font-size: 15px;">linkextractor</a> <a href="/tags/nginx/" style="font-size: 15px;">nginx</a> <a href="/tags/lxml/" style="font-size: 15px;">lxml</a> <a href="/tags/redis/" style="font-size: 15px;">redis</a> <a href="/tags/osroom/" style="font-size: 15px;">osroom</a> <a href="/tags/习题/" style="font-size: 15px;">习题</a> <a href="/tags/RESTful-api/" style="font-size: 15px;">RESTful-api</a> <a href="/tags/多线程/" style="font-size: 15px;">多线程</a> <a href="/tags/WSGI/" style="font-size: 15px;">WSGI</a> <a href="/tags/信号/" style="font-size: 15px;">信号</a> <a href="/tags/blinker/" style="font-size: 15px;">blinker</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/10/23/linkextractor/">LinkExtractor的简单使用</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/23/bs4_and_lxml/">网页爬虫---html的遍历</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/16/design/">一个设计签名的小程序</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/15/osroom/">OSROOM安装使用</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/14/signal/">Flask中的信号</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/13/email/">电子邮件</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/13/problem/">一些练习题</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/13/nginx/">nginx的使用</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/13/celery/">Celery的介绍</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/13/restful_api/">RESTful API的设计策略</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://www.yangqq.com/" title="杨青个人博客" target="_blank">杨青个人博客</a><ul></ul><a href="https://www.oschina.net/project" title="开源中国项目" target="_blank">开源中国项目</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/." rel="nofollow">Mistacker|博客.</a> Powered by<a rel="nofollow" target="_blank" href="https://mistacker.github.io"> Mistacker | 个人专属</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.css"><script>(function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
(w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
})(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');
_st('install','cxRJFkZr9xPGAhZDVN82','2.0.0');
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div><script src="/live2dw/lib/L2Dwidget.min.js?0c58a1486de42ac6cc1c59c7d98ae887"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/haru02.model.json"},"display":{"position":"right","width":120,"height":240},"mobile":{"show":true},"log":false});</script></body></html>